EPSY.CanvasHelper=function(context){this.lastTimestamp=Date.now(),this.emitters=[],this.canvasRenderer=new EPSY.CanvasRenderer(context)},EPSY.CanvasHelper.prototype.draw=function(){var timestamp=(new Date).getTime(),delta=timestamp-(this.lastTimestamp||timestamp);this.lastTimestamp=timestamp,delta/=1e3;for(var i=0;i<this.emitters.length;i++){var emitter=this.emitters[i];emitter&&(emitter.update(delta),this.canvasRenderer.render(emitter))}},EPSY.CanvasHelper.prototype.createEmitter=function(config,x,y){var emitter=new EPSY.Emitter(config);return void 0!=x&&(emitter.settings.pos.x=x),void 0!=y&&(emitter.settings.pos.y=y),emitter.restart(),this.emitters.push(emitter),emitter},EPSY.CanvasHelper.prototype.loadSystem=function(data,x,y){x=x||0,y=y||0;for(var parseddata=JSON.parse(data),i=0;i<parseddata.length;i++){var config=parseddata[i];config.pos.x+=x,config.pos.y+=y,this.createEmitter(config)}};